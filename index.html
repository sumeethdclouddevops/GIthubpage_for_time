<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deployment Command Center</title>
    <style>
        :root {
            --sap-blue: #89cff0; /* Lighter blue for dark mode visibility */
            --sap-gold: #F0AB00;
            --bg-color: #121212;
            --card-bg: rgba(30, 30, 30, 0.7); /* Glassmorphism base */
            --text-color: #e0e0e0;
            --ring-header-bg: #2d2d2d; 
            --status-ok: #dc3545; /* Red for Business Hours */
            --status-maint: #28a745; /* Green for Non-Business Hours */
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: radial-gradient(circle at top left, #2c3e50, #000000);
            min-height: 100vh;
            color: var(--text-color);
            margin: 0;
            padding: 20px;
        }

        /* Header & Logo */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(40, 40, 40, 0.9);
            padding: 15px 30px;
            border-radius: 12px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
        }

        .header-title h1 {
            margin: 0;
            font-size: 1.5rem;
            color: var(--sap-blue);
        }

        .header-title p {
            margin: 5px 0 0;
            color: #aaa;
            font-size: 0.9rem;
        }

        .header-controls {
            display: flex;
            align-items: center;
            flex-wrap: wrap; /* Ensure controls don't get cut off */
            gap: 20px;
        }

        /* Planner Controls */
        .planner-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            background: rgba(0,0,0,0.2);
            padding: 5px 15px;
            border-radius: 8px;
        }

        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s;
            font-size: 0.9rem;
        }
        .btn-primary {
            background-color: var(--sap-blue);
            color: #121212;
        }
        .btn-primary:hover {
            background-color: #6bbce0;
        }
        .btn-secondary {
            background-color: #444;
            color: #fff;
        }
        .btn-secondary:hover {
            background-color: #555;
        }

        /* Dropdown Style */
        #view-filter {
            padding: 10px 15px;
            border-radius: 5px;
            border: 1px solid #444;
            background-color: #333;
            color: #fff;
            font-size: 1rem;
            cursor: pointer;
        }

        .planner-select, .planner-time {
            padding: 8px 10px;
            border-radius: 5px;
            border: 1px solid #444;
            background-color: #333;
            color: #fff;
            font-size: 0.9rem;
        }

        .logo-container img {
            height: 50px;
            /* If you don't have an image URL yet, this alt text shows */
        }

        /* Summary Panel */
        .summary-panel {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 25px;
        }

        .summary-badge {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px 25px;
            border-radius: 30px;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Main Grid Layout */
        .dashboard-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 768px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }
        }

        /* Ring Columns */
        .ring-column {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .ring-header {
            border-bottom: 2px solid var(--sap-gold);
            padding-bottom: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ring-header h2 {
            margin: 0;
            color: var(--sap-blue);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* DC Cards */
        .dc-card {
            width: 220px;
            min-height: 220px; /* Allow expansion */
            height: auto;
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px; /* Smooth rounded corners */
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            flex-direction: column; /* Stack content vertically */
            justify-content: center;
            align-items: center;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            backdrop-filter: blur(10px);
        }

        .dc-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        /* Product List Styles */
        .dc-products {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, opacity 0.5s ease, margin-top 0.5s ease;
            font-size: 0.8rem;
            text-align: left;
            width: 100%;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            margin-top: 0;
        }

        /* Expand on click */
        .dc-products.expanded {
            max-height: 200px;
            opacity: 1;
            margin-top: 10px;
        }

        /* Add cursor pointer to card for click feedback */
        .dc-card {
            cursor: pointer;
        }

        .dc-products ol {
            margin: 5px 0 10px 25px;
            padding: 0;
        }
        .dc-products strong {
            display: block;
            padding: 8px 10px 0;
            color: var(--sap-blue);
        }

        .dc-left-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        /* Analog Clock Styles */
        .analog-clock {
            width: 60px;
            height: 60px;
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 50%;
            position: relative;
            background: rgba(0,0,0,0.4);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.8);
            flex-shrink: 0;
            margin-bottom: 5px;
        }

        .hand {
            position: absolute;
            bottom: 50%;
            left: 50%;
            transform-origin: bottom center;
            border-radius: 2px;
            z-index: 2;
        }

        .hand.hour { width: 3px; height: 16px; background: #fff; border-radius: 4px; }
        .hand.min { width: 2px; height: 24px; background: var(--sap-blue); border-radius: 2px; }
        .hand.sec { width: 1px; height: 20px; background: var(--status-maint); z-index: 3; }
        
        .center-dot {
            position: absolute;
            top: 50%; left: 50%;
            width: 6px; height: 6px;
            background: #fff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 4;
        }

        /* Clock Markers */
        .clock-marker { position: absolute; background: #888; }
        .m-12, .m-6 { width: 2px; height: 5px; left: 50%; transform: translateX(-50%); }
        .m-12 { top: 2px; }
        .m-6 { bottom: 2px; }
        .m-3, .m-9 { width: 5px; height: 2px; top: 50%; transform: translateY(-50%); }
        .m-3 { right: 2px; }
        .m-9 { left: 2px; }

        .dc-info h3 {
            margin: 0 0 5px 0;
            font-size: 1.1rem;
            text-align: center;
        }

        .dc-time {
            font-size: 1.2rem;
            font-weight: bold;
            font-variant-numeric: tabular-nums;
            color: #fff;
        }

        .dc-date {
            font-size: 0.8rem;
            color: #aaa;
            text-align: center;
        }

        .dc-window {
            font-size: 0.7rem;
            color: #888;
            text-align: center;
        }

        .countdown-container {
            margin-top: 5px;
            font-size: 0.85rem;
            color: var(--sap-gold);
            font-family: 'Consolas', monospace;
            text-align: center;
        }
        .countdown-label {
            font-size: 0.7rem;
            color: #777;
            margin-right: 5px;
        }

        /* Status Indicators */
        .status-badge {
            padding: 2px 8px;
            border-radius: 20px;
            font-size: 0.65rem;
            font-weight: bold;
            text-transform: uppercase;
            color: white;
            min-width: 80px;
            margin-top: 5px;
            text-align: center;
        }

        .status-active {
            background-color: var(--status-ok);
        }

        .status-maint {
            background-color: var(--status-maint);
            animation: pulse 2s infinite;
        }

        .recommendation-badge {
            display: inline-block;
            margin-top: 5px;
            font-size: 0.7rem;
            color: var(--sap-blue);
            border: 1px solid var(--sap-blue);
            padding: 2px 6px;
            border-radius: 4px;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 40px;
            color: #888;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>

    <header>
        <div class="header-title">
            <h1>Deployment Status Dashboard</h1>
            <p>Live Global DC Timings & Non-Business Hours Windows</p>
        </div>
        <div class="header-controls">
            <div class="planner-controls">
                <select id="product-select" class="planner-select">
                    <option value="0">Select Product...</option>
                    <option value="2.5">AN (2.5 hrs)</option>
                    <option value="2">Buyer (2 hrs)</option>
                    <option value="2">S4 (2 hrs)</option>
                </select>
                <input type="time" id="deploy-time" class="planner-time">
                <button class="btn btn-primary" onclick="showPlannerResults()">Check Availability</button>
                <button class="btn btn-secondary" onclick="goHome()">Home</button>
            </div>

            <select id="view-filter" onchange="filterSelection(this.value)">
                <option value="all">Show All Rings</option>
                <option value="ring-1">Ring 1 DC's</option>
                <option value="ring-2">Ring 2 DC's</option>
            </select>
            <div class="logo-container">
                <!-- Replace src with your actual hosted logo path if needed -->
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/59/SAP_2011_logo.svg/2560px-SAP_2011_logo.svg.png" alt="SAP Ariba Logo">
            </div>
        </div>
    </header>

    <div id="main-view">
    <div class="summary-panel">
        <div class="summary-badge" style="color: var(--status-ok);">Business Hours: <span id="count-business-hours">0</span></div>
        <div class="summary-badge" style="color: var(--status-maint);">Non-Business Hours: <span id="count-non-business">0</span></div>
    </div>

    <div class="dashboard-container">
        
        <!-- RING 1 -->
        <div class="ring-column" id="ring-1">
            <div class="ring-header">
                <h2>Ring 1</h2>
                <small>AU, IN, UAE, KSA</small>
            </div>
            <div id="ring-1-content" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px;"></div>
        </div>

        <!-- RING 2 -->
        <div class="ring-column" id="ring-2">
            <div class="ring-header">
                <h2>Ring 2</h2>
                <small>JP, CN, EU, US</small>
            </div>
            <div id="ring-2-content" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px;"></div>
        </div>

    </div>
    </div>

    <div id="planner-view" style="display: none;">
        <div style="margin-bottom: 20px;">
            <button class="btn btn-secondary" onclick="goHome()">Home</button>
        </div>
        <h2 style="color: var(--sap-blue); border-bottom: 1px solid #444; padding-bottom: 10px;">Recommended Deployment Windows</h2>
        <div id="planner-results" class="dashboard-container" style="display: flex; flex-wrap: wrap; gap: 20px;"></div>
    </div>

    <footer>
        Generated for Deployment Team | Times are calculated live based on browser clock.
    </footer>

    <script>
        // Configuration for Data Centers
        // 'maintStart' and 'maintEnd' are hours (0-23).
        // 'checkType' determines if we check against Local time or IST.
        const dataCenters = [
            // RING 1
            { id: 'au', name: 'Australia (AUS)', zone: 'Australia/Sydney', ring: 1 },
            { 
                id: 'in', 
                name: 'India (IN)', 
                zone: 'Asia/Kolkata', 
                ring: 1,
                maintStart: 19, // 7 PM IST
                maintEnd: 7,    // 7 AM IST
                checkType: 'LOCAL'
            },
            { id: 'uae', name: 'UAE', zone: 'Asia/Dubai', ring: 1 },
            { id: 'ksa', name: 'Saudi Arabia (KSA)', zone: 'Asia/Riyadh', ring: 1 },

            // RING 2
            { 
                id: 'jp', 
                name: 'Japan (JP)', 
                zone: 'Asia/Tokyo', 
                ring: 2, 
                maintStart: 22, // 10 PM Local
                maintEnd: 6,    // 6 AM Local
                checkType: 'LOCAL' 
            },
            { id: 'cn', name: 'China (CN)', zone: 'Asia/Shanghai', ring: 2 },
            { id: 'eu', name: 'Europe (EU)', zone: 'Europe/Berlin', ring: 2 }, // Using Berlin as Central EU
            { 
                id: 'us', 
                name: 'United States (US)', 
                zone: 'America/New_York', 
                ring: 2,
                maintStart: 5,  // 5 AM IST (start of non-business hours)
                maintEnd: 21,   // 9 PM IST (end of non-business hours)
                checkType: 'IST_BASED' 
            }
        ];

        function filterSelection(selection) {
            const ring1 = document.getElementById('ring-1');
            const ring2 = document.getElementById('ring-2');

            if (selection === 'all') {
                ring1.style.display = 'block';
                ring2.style.display = 'block';
            } else if (selection === 'ring-1') {
                ring1.style.display = 'block';
                ring2.style.display = 'none';
            } else if (selection === 'ring-2') {
                ring1.style.display = 'none';
                ring2.style.display = 'block';
            }
        }

        function getISTHour() {
            const now = new Date();
            // Convert current time to IST string, then parse the hour
            const istString = now.toLocaleString("en-US", {timeZone: "Asia/Kolkata"});
            const istDate = new Date(istString);
            return istDate.getHours();
        }

        function isNonBusinessHours(dc, localHour) {
            // If no Non-Business Hours window defined, assume Business-Hours
            if (dc.maintStart === undefined || dc.maintEnd === undefined) return false;

            let currentCheckHour = localHour;

            // Special Logic for US: Check against IST time, not local US time
            if (dc.checkType === 'IST_BASED') {
                currentCheckHour = getISTHour();
            }

            const start = dc.maintStart;
            const end = dc.maintEnd;

            // Logic for windows that cross midnight (e.g., 22:00 to 06:00)
            if (start > end) {
                return currentCheckHour >= start || currentCheckHour < end;
            } 
            // Logic for standard windows (e.g., 07:00 to 16:00)
            else {
                return currentCheckHour >= start && currentCheckHour < end;
            }
        }

        function getCountdown(dc, inMaint) {
            if (dc.maintStart === undefined || dc.maintEnd === undefined) return "";

            // Determine target hour: if in maint, waiting for end. If active, waiting for start.
            const targetHour = inMaint ? dc.maintEnd : dc.maintStart;
            const label = inMaint ? "Ends in:" : "Starts in:";
            
            // Determine timezone to calculate against
            const timeZone = (dc.checkType === 'IST_BASED') ? 'Asia/Kolkata' : dc.zone;

            // Create Date objects using the specific timezone string to handle wall-clock math
            const nowStr = new Date().toLocaleString('en-US', { timeZone: timeZone });
            const now = new Date(nowStr);
            
            let target = new Date(now);
            target.setHours(targetHour, 0, 0, 0);

            // If target hour has passed today, it means the event is tomorrow
            if (target <= now) {
                target.setDate(target.getDate() + 1);
            }

            const diff = target - now;
            const h = Math.floor(diff / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);

            // Pad with zeros
            const hh = String(h).padStart(2, '0');
            const mm = String(m).padStart(2, '0');
            const ss = String(s).padStart(2, '0');

            return `<span class="countdown-label">${label}</span>${hh}:${mm}:${ss}`;
        }

        function isTimeSlotAvailable(dc, productDuration, timeInput) {
            if (!productDuration || !timeInput || dc.maintStart === undefined) return false;

            // Parse selected time (User Local)
            const [selH, selM] = timeInput.split(':').map(Number);
            const now = new Date();
            now.setHours(selH, selM, 0, 0);

            // Convert selected time to DC time
            // We create a formatter for the DC zone
            const parts = new Intl.DateTimeFormat('en-US', {
                timeZone: dc.checkType === 'IST_BASED' ? 'Asia/Kolkata' : dc.zone,
                hour: 'numeric', minute: 'numeric', hour12: false
            }).formatToParts(now);
            
            const dcH = parseInt(parts.find(p => p.type === 'hour').value);
            const dcM = parseInt(parts.find(p => p.type === 'minute').value);
            
            const startDecimal = dcH + (dcM / 60);
            const endDecimal = startDecimal + productDuration;

            // Check if interval [startDecimal, endDecimal] is inside [maintStart, maintEnd]
            // Handle wrap around midnight
            const mStart = dc.maintStart;
            const mEnd = dc.maintEnd;

            let fits = false;
            if (mStart > mEnd) { // e.g. 22 to 6
                // Window is [22..24] U [0..6]
                // It fits if (start >= 22 AND end <= 24 + 6) -- simplified logic for wrap
                // Easier: Check if start is valid AND end is valid AND we didn't cross the forbidden zone (6 to 22)
                // Let's use a helper: isTimeInWindow(t)
                const sIn = (startDecimal >= mStart) || (startDecimal < mEnd);
                
                // For end time, if it goes past 24, we mod 24.
                // But strictly, if start is 23:00 and duration is 2h, end is 1:00 (next day).
                // 23:00 is in window. 1:00 is in window.
                // Did we cross the gap? Gap is [mEnd, mStart] i.e. [6, 22].
                // If duration is short (2.5h), we just need to ensure we don't start right before gap closes.
                
                // Simple check:
                // If start is in window, how much time left until window closes?
                let timeUntilClose;
                if (startDecimal >= mStart) {
                    timeUntilClose = (24 - startDecimal) + mEnd;
                } else {
                    timeUntilClose = mEnd - startDecimal;
                }
                
                if (sIn && productDuration <= timeUntilClose) fits = true;

            } else { // e.g. 7 to 16
                const sIn = (startDecimal >= mStart && startDecimal < mEnd);
                const timeUntilClose = mEnd - startDecimal;
                if (sIn && productDuration <= timeUntilClose) fits = true;
            }

            return fits;
        }

        function updateDashboard() {
            const now = new Date();
            let businessHoursCount = 0;
            let nonBusinessCount = 0;

            dataCenters.forEach(dc => {
                // 1. Get Time in Target Zone
                const options = { 
                    timeZone: dc.zone, 
                    hour: '2-digit', 
                    minute: '2-digit', 
                    second: '2-digit', 
                    hour12: false 
                };
                const timeString = new Intl.DateTimeFormat('en-US', options).format(now);
                
                // Get Date in Target Zone
                const dateOptions = { timeZone: dc.zone, weekday: 'short', month: 'short', day: 'numeric' };
                const dateString = new Intl.DateTimeFormat('en-US', dateOptions).format(now);

                // Get Time Parts for Analog Clock
                const parts = new Intl.DateTimeFormat('en-US', {
                    timeZone: dc.zone,
                    hour: 'numeric', minute: 'numeric', second: 'numeric',
                    hour12: false
                }).formatToParts(now);
                
                const h = parseInt(parts.find(p => p.type === 'hour').value);
                const m = parseInt(parts.find(p => p.type === 'minute').value);
                const s = parseInt(parts.find(p => p.type === 'second').value);

                const sDeg = ((s / 60) * 360);
                const mDeg = ((m / 60) * 360) + ((s/60)*6);
                const hDeg = ((h / 12) * 360) + ((m/60)*30);

                // 2. Determine Non-Business Hours Status
                // We need the integer hour for logic check
                // We already have 'h' from above
                const localHour = h;
                
                const inMaint = isNonBusinessHours(dc, localHour);
                
                // Update Counters
                if (inMaint) nonBusinessCount++; else businessHoursCount++;

                // Get Countdown
                const countdownHtml = getCountdown(dc, inMaint);

                // 3. Build HTML
                const statusClass = inMaint ? 'status-maint' : 'status-active';
                const statusText = inMaint ? 'Non-Business Hours' : 'Business Hours';
                
                // Special text for US to indicate it's based on IST
                let subText = dateString;
                if(dc.id === 'us' && inMaint) subText += " (IST Window)";

                // Window Text
                let windowText = "";
                if (dc.maintStart !== undefined) {
                    const s = String(dc.maintStart).padStart(2,'0') + ":00";
                    const e = String(dc.maintEnd).padStart(2,'0') + ":00";
                    windowText = `Non-Biz Window: ${s} - ${e}`;
                }

                const borderColor = inMaint ? 'var(--status-maint)' : 'var(--status-ok)';
                const shadowColor = inMaint ? 'rgba(220, 53, 69, 0.3)' : 'rgba(40, 167, 69, 0.3)';

                // 4. Inject or Update DOM
                // We refactor this to NOT replace innerHTML every second, so hover state persists
                const containerId = `dc-${dc.id}`;
                let el = document.getElementById(containerId);
                
                if (!el) {
                    // Create wrapper if doesn't exist
                    el = document.createElement('div');
                    el.id = containerId;
                    
                    // Determine Products List
                    let productsList = [];
                    if (dc.id === 'us') {
                        productsList = ['AN', 'Buyer', 'S4'];
                    } else {
                        productsList = ['Buyer', 'S4', 'Archesenc'];
                    }
                    const productsHtml = productsList.map(p => `<li>${p}</li>`).join('');

                    // Initial HTML Structure
                    el.innerHTML = `
                        <div class="dc-card">
                            <div class="dc-left-section">
                                <div class="analog-clock">
                                    <div class="clock-marker m-12"></div>
                                    <div class="clock-marker m-3"></div>
                                    <div class="clock-marker m-6"></div>
                                    <div class="clock-marker m-9"></div>
                                    <div class="hand hour"></div>
                                    <div class="hand min"></div>
                                    <div class="hand sec"></div>
                                    <div class="center-dot"></div>
                                </div>
                                <div class="dc-info">
                                    <h3>${dc.name}</h3>
                                    <div class="dc-date"></div>
                                    <div class="dc-window"></div>
                                    <div class="countdown-container"></div>
                                    <div class="dc-time"></div>
                                </div>
                                <div class="dc-products">
                                    <strong>Products:</strong>
                                    <ol>${productsHtml}</ol>
                                </div>
                                <div class="status-badge"></div>
                            </div>
                        </div>
                    `;
                    document.getElementById(`ring-${dc.ring}-content`).appendChild(el);

                    // Add click handler to toggle products
                    const card = el.querySelector('.dc-card');
                    const productsDiv = el.querySelector('.dc-products');
                    card.addEventListener('click', function(e) {
                        e.stopPropagation();
                        // Toggle expanded class
                        productsDiv.classList.toggle('expanded');
                    });
                }

                // Update Dynamic Elements
                const card = el.querySelector('.dc-card');
                card.style.borderTop = `6px solid ${borderColor}`;
                card.style.boxShadow = `0 8px 24px -4px ${shadowColor}`;

                el.querySelector('.hand.hour').style.transform = `rotate(${hDeg}deg)`;
                el.querySelector('.hand.min').style.transform = `rotate(${mDeg}deg)`;
                el.querySelector('.hand.sec').style.transform = `rotate(${sDeg}deg)`;

                el.querySelector('.dc-date').innerText = subText;
                el.querySelector('.dc-window').innerText = windowText;
                el.querySelector('.countdown-container').innerHTML = countdownHtml;
                el.querySelector('.dc-time').innerText = timeString;
                
                const badge = el.querySelector('.status-badge');
                badge.className = `status-badge ${statusClass}`;
                badge.innerText = statusText;
            });

            // Update Summary
            document.getElementById('count-business-hours').innerText = businessHoursCount;
            document.getElementById('count-non-business').innerText = nonBusinessCount;
        }

        function showPlannerResults() {
            const productSelect = document.getElementById('product-select');
            const timeInput = document.getElementById('deploy-time');
            const duration = parseFloat(productSelect.value);
            const timeVal = timeInput.value;

            if (!duration || !timeVal) {
                alert("Please select a product and a time.");
                return;
            }

            // Switch Views
            document.getElementById('main-view').style.display = 'none';
            document.getElementById('planner-view').style.display = 'block';
            document.getElementById('view-filter').style.display = 'none';

            const container = document.getElementById('planner-results');
            container.innerHTML = '';
            let count = 0;

            dataCenters.forEach(dc => {
                if (isTimeSlotAvailable(dc, duration, timeVal)) {
                    count++;
                    // Create a simple card for the result
                    const html = `
                        <div class="dc-card" style="border-top: 6px solid var(--sap-blue); box-shadow: 0 8px 24px -4px rgba(137, 207, 240, 0.3);">
                            <div class="dc-info">
                                <h3>${dc.name}</h3>
                                <div class="dc-window">Non-Biz Window: ${String(dc.maintStart).padStart(2,'0')}:00 - ${String(dc.maintEnd).padStart(2,'0')}:00</div>
                                <div class="recommendation-badge" style="margin-top:10px;">âœ… Recommended</div>
                            </div>
                        </div>
                    `;
                    container.innerHTML += html;
                }
            });

            if (count === 0) {
                container.innerHTML = '<p style="color: #aaa;">No Data Centers found matching the criteria.</p>';
            }
        }

        function goHome() {
            document.getElementById('main-view').style.display = 'block';
            document.getElementById('planner-view').style.display = 'none';
            document.getElementById('view-filter').style.display = 'block';
        }

        // Initial Run
        updateDashboard();
        
        // Update every second
        setInterval(updateDashboard, 1000);

    </script>
</body>
</html> 
//--ignore --
